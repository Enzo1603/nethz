{% load i18n %}

<!-- Basic SEO Meta Tags -->
<meta name="description" content="{{ meta_description|default:seo_defaults.default_description }}">
<meta name="keywords" content="{{ meta_keywords|default:seo_defaults.default_keywords }}">
<meta name="author" content="{{ seo_defaults.author }}">
<meta name="robots" content="{{ meta_robots|default:'index, follow' }}">

<!-- Canonical URL -->
{% if canonical_url %}
<link rel="canonical" href="{{ canonical_url }}">
{% endif %}

<!-- Open Graph Meta Tags -->
<meta property="og:title" content="{{ og_title|default:title|default:seo_defaults.site_name }}">
<meta property="og:description" content="{{ og_description|default:meta_description|default:seo_defaults.default_description }}">
<meta property="og:type" content="{{ og_type|default:'website' }}">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:site_name" content="{{ seo_defaults.site_name }}">
<meta property="og:locale" content="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE|default:'de_CH' }}">

<!-- Open Graph Image -->
{% if og_image %}
<meta property="og:image" content="{{ og_image }}">
<meta property="og:image:alt" content="{{ og_image_alt|default:og_title|default:title }}">
{% endif %}

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="{{ twitter_card|default:'summary' }}">
<meta name="twitter:title" content="{{ twitter_title|default:og_title|default:title|default:seo_defaults.site_name }}">
<meta name="twitter:description" content="{{ twitter_description|default:og_description|default:meta_description|default:seo_defaults.default_description }}">

<!-- Twitter Image -->
{% if twitter_image %}
<meta name="twitter:image" content="{{ twitter_image|default:og_image }}">
<meta name="twitter:image:alt" content="{{ twitter_image_alt|default:og_image_alt|default:twitter_title|default:title }}">
{% endif %}

<!-- Additional Meta Tags -->
<meta name="theme-color" content="{{ seo_defaults.theme_color }}">
<meta name="msapplication-TileColor" content="{{ seo_defaults.theme_color }}">

<!-- Language Alternates -->
{% get_available_languages as LANGUAGES %}
{% for lang_code, lang_name in LANGUAGES %}
{% if request.resolver_match.url_name %}
<link rel="alternate" hreflang="{{ lang_code }}" href="{{ request.build_absolute_uri }}?lang={{ lang_code }}">
{% endif %}
{% endfor %}

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ structured_data_type|default:'WebSite' }}",
  "name": "{{ structured_data_name|default:seo_defaults.site_name }}",
  "description": "{{ structured_data_description|default:meta_description|default:seo_defaults.default_description }}",
  "url": "{{ request.build_absolute_uri }}",
  {% if structured_data_type == 'EducationalOrganization' %}
  "educationalLevel": "Higher Education",
  "educationalUse": "Study Resources",
  {% endif %}
  "inLanguage": "{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE|default:'de' }}"
}
</script>